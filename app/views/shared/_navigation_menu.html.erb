<nav class="w-64 bg-blue-900 border-r-2 border-orange-500 p-4 overflow-y-auto"
     data-controller="menu-highlight"
     data-menu-highlight-active-class="menu-active"
     data-menu-highlight-active-text-class="text-orange-500">
  <div class="mb-6">
    <%= link_to profile_path, data: { menu_item: "profile", turbo_frame: "content_panel" }, class: "block hover:bg-blue-800 rounded p-2 -m-2 transition-colors" do %>
      <%= render "shared/header_username", user: current_user %>
      <div class="text-sm text-lime-400">Credits: <%= number_with_delimiter(current_user.credits.to_i) %></div>
    <% end %>
  </div>

  <ul class="space-y-2">
    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to inbox_index_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span>Inbox</span>
        <%= turbo_frame_tag "inbox_unread_badge" do %>
          <%= unread_badge(current_user) %>
        <% end %>
      <% end %>
    </li>

    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to chat_index_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span>Chat</span>
      <% end %>
    </li>

    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-menu-item="navigation"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to navigation_index_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span>Navigation</span>
      <% end %>
    </li>

    <li class="group" data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to systems_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span>Systems</span>
      <% end %>
      <ul class="pl-6 mt-1 space-y-1 hidden group-hover:block">
        <li data-keyboard-navigation-target="menuItem"
            data-menu-highlight-target="item">
          <%= link_to buildings_path,
              class: "block px-3 py-1 hover:bg-blue-800 text-sm rounded",
              data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
            Buildings
          <% end %>
        </li>
      </ul>
    </li>

    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-menu-item="ships"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to ships_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span>Ships</span>
      <% end %>
    </li>

    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-menu-item="routes"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to routes_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span>Routes</span>
      <% end %>
    </li>

    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-menu-item="workers"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to workers_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span>Workers</span>
      <% end %>
    </li>

    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to about_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span>About</span>
      <% end %>
    </li>

    <div class="mt-8 pt-4 border-t border-blue-700">
      <%= button_to "Sign Out", sessions_path, method: :delete,
          class: "block w-full text-left px-3 py-2 hover:bg-blue-800 transition-colors rounded text-red-400" %>
    </div>
  </ul>
</nav>
