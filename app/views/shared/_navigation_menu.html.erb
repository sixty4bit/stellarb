<nav class="w-64 bg-blue-900 border-r-2 border-orange-500 p-4 overflow-y-auto"
     data-controller="menu-highlight">
  <div class="mb-6">
    <%= link_to profile_path, data: { menu_item: "profile", turbo_frame: "content_panel" }, class: "block hover:bg-blue-800 rounded p-2 -m-2 transition-colors" do %>
      <h1 class="text-orange-500 font-bold text-xl"><%= current_user.name %></h1>
      <div class="text-sm text-lime-400">Credits: <%= number_with_delimiter(current_user.credits.to_i) %></div>
    <% end %>
  </div>

  <ul class="space-y-2">
    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to inbox_index_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded #{'bg-blue-800' if @active_menu == :inbox}",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span class="<%= 'text-orange-500' if @active_menu == :inbox %>">Inbox</span>
      <% end %>
    </li>

    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to chat_index_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded #{'bg-blue-800' if @active_menu == :chat}",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span class="<%= 'text-orange-500' if @active_menu == :chat %>">Chat</span>
      <% end %>
    </li>

    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-menu-item="navigation"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to navigation_index_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded #{'bg-blue-800' if @active_menu == :navigation}",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span class="<%= 'text-orange-500' if @active_menu == :navigation %>">Navigation</span>
      <% end %>
    </li>

    <li class="group" data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to systems_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded #{'bg-blue-800' if @active_menu == :systems}",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span class="<%= 'text-orange-500' if @active_menu == :systems %>">Systems</span>
      <% end %>
      <ul class="pl-6 mt-1 space-y-1 hidden group-hover:block">
        <li data-keyboard-navigation-target="menuItem"
            data-menu-highlight-target="item">
          <%= link_to buildings_path,
              class: "block px-3 py-1 hover:bg-blue-800 text-sm rounded",
              data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
            Buildings
          <% end %>
        </li>
      </ul>
    </li>

    <li class="group" data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-menu-item="ships"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to ships_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded #{'bg-blue-800' if @active_menu == :ships}",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span class="<%= 'text-orange-500' if @active_menu == :ships %>">Ships</span>
      <% end %>
      <ul class="pl-6 mt-1 space-y-1 hidden group-hover:block">
        <li data-keyboard-navigation-target="menuItem"
            data-menu-highlight-target="item">
          <%= link_to trading_ships_path,
              class: "block px-3 py-1 hover:bg-blue-800 text-sm rounded",
              data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
            Trading
          <% end %>
        </li>
        <li data-keyboard-navigation-target="menuItem"
            data-menu-highlight-target="item">
          <%= link_to combat_ships_path,
              class: "block px-3 py-1 hover:bg-blue-800 text-sm rounded",
              data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
            Combat
          <% end %>
        </li>
      </ul>
    </li>

    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-menu-item="routes"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to routes_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded #{'bg-blue-800' if @active_menu == :routes}",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span class="<%= 'text-orange-500' if @active_menu == :routes %>">Routes</span>
      <% end %>
    </li>

    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-menu-item="workers"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to workers_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded #{'bg-blue-800' if @active_menu == :workers}",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span class="<%= 'text-orange-500' if @active_menu == :workers %>">Workers</span>
      <% end %>
    </li>

    <li data-keyboard-navigation-target="menuItem"
        data-menu-highlight-target="item"
        data-action="mouseenter->keyboard-navigation#selectItem">
      <%= link_to about_path,
          class: "block px-3 py-2 hover:bg-blue-800 transition-colors rounded #{'bg-blue-800' if @active_menu == :about}",
          data: { turbo_frame: "content_panel", turbo_action: "advance" } do %>
        <span class="<%= 'text-orange-500' if @active_menu == :about %>">About</span>
      <% end %>
    </li>

    <div class="mt-8 pt-4 border-t border-blue-700">
      <%= button_to "Sign Out", sessions_path, method: :delete,
          class: "block w-full text-left px-3 py-2 hover:bg-blue-800 transition-colors rounded text-red-400" %>
    </div>
  </ul>
</nav>
