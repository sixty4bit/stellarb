<turbo-frame id="content_panel">
<div>
  <h1 class="text-2xl font-bold text-orange-500 mb-1">Inbox</h1>
  <div class="text-sm text-gray-400 mb-6">System Status Messages</div>

  <% if @messages.any? %>
    <div class="space-y-2" data-controller="inbox-list">
      <% @messages.each do |message| %>
        <%= link_to inbox_path(message),
            class: "block bg-blue-900 border border-blue-700 p-4 hover:border-orange-500 transition-colors",
            data: {
              turbo_frame: "content_panel",
              keyboard_navigation_target: "contentItem",
              action: "mouseenter->keyboard-navigation#selectContentItem"
            } do %>
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <div class="flex items-center gap-2">
                <span class="<%= message.unread? ? 'text-orange-500' : 'text-gray-500' %>">
                  <%= message.unread? ? '●' : '○' %>
                </span>
                <span class="font-bold <%= message.urgent? ? 'text-red-400' : '' %>">
                  <%= message.title %>
                </span>
                <% if message.urgent? %>
                  <span class="text-xs bg-red-800 text-white px-2 py-0.5 rounded">[URGENT]</span>
                <% end %>
              </div>
              <div class="text-sm text-gray-400 mt-1">
                From: <%= message.from %>
              </div>
              <div class="text-sm mt-2">
                <%= truncate(message.body, length: 100) %>
              </div>
            </div>
            <div class="text-xs text-gray-500 ml-4 whitespace-nowrap">
              <%= time_ago_in_words(message.created_at) %> ago
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <div class="bg-blue-900 border border-blue-700 p-8 text-center text-gray-400">
      <p class="text-lg mb-2">No messages</p>
      <p class="text-sm">Your inbox is empty. Check back later for system notifications.</p>
    </div>
  <% end %>

  <div class="mt-8 text-sm text-gray-500">
    <p>Keyboard: Tab to focus list, j/k to navigate, Enter to read</p>
  </div>
</div>
</turbo-frame>
